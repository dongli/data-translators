# Metview Macro - created from Display Window contents
# By:   prod
# Date: Mon Apr 15 06:16:17 2019
# For:  wangxh (NMIC_Wang_Xin_Hua_T6225)
# 
# Disclaimer:
#   This macro is to be used primarily as a framework.
#   Some macros generated in this manner may not work
#   as expected and in such cases you may need to
#   fine-tune the macro manually!

# Device description

File = pdf_output(
   OUTPUT_NAME : "/g1/u/wangxh/metview//pdf"
   )

# Checks running mode
mode = runmode()
if mode = 'batch' or mode = 'execute' then
   setoutput(File)
end if

# Icons description

# Importing synop_2018101500_odb
synop_2018101500_odb  = read  ( "/g1/u/wangxh/metview/synop.2018101500.odb")

Odb_Visualiser = odb_visualiser(
   ODB_LATITUDE_VARIABLE  : "lat@synop",
   ODB_LONGITUDE_VARIABLE : "lon@synop",
   ODB_VALUE_VARIABLE     : "dewpoint@synop",
   ODB_DATA               : synop_2018101500_odb
   )

_Symbol_Plotting__3 = msymb(
   LEGEND                               : "ON",
   SYMBOL_TYPE                          : "MARKER",
   SYMBOL_TABLE_MODE                    : "ADVANCED",
   SYMBOL_ADVANCED_TABLE_SELECTION_TYPE : "INTERVAL",
   SYMBOL_ADVANCED_TABLE_MIN_VALUE      : -15,
   SYMBOL_ADVANCED_TABLE_MAX_VALUE      : 30,
   SYMBOL_ADVANCED_TABLE_INTERVAL       : 5.0
   )

# Call function to build layout (defined at end of macro)
dw = build_layout()

# Plot command
plot ( dw[1], Odb_Visualiser, _Symbol_Plotting__3 )

# End of main program

# Function to build the layout
function build_layout()

   #PageDescription
   
   _Geographical_View_ = geoview(
      )
   
   _Page_ = plot_page(
      TOP       : 0,
      BOTTOM    : 100,
      LEFT      : 0,
      RIGHT     : 100,
      VIEW      : _Geographical_View_
   )
   
   # SuperPage description
   
   _Display_Window_ = plot_superpage(
      LAYOUT_SIZE        : "A4",
      LAYOUT_ORIENTATION : "LANDSCAPE",
      CUSTOM_WIDTH       : 29.7,
      CUSTOM_HEIGHT      : 21.0,
      PAGES              : [ _Page_ ]
   )
   # plot_superpage returns a list of drop identifiers.
   # Index 1 is for first page, and so on.

   return _Display_Window_

end build_layout
